<div class="container-fluid" >
 
    <div class="row" style="padding: 0px;">
        <div class="col-md-1 list-group" style="padding: 0px;">
            <%= render partial: "work_flow/menu", locals: {selected: "pcb_sell_feeback_list"} %>
        </div>
        <div class="col-md-11" style="padding-top: 10px;">




            <div class="row">
                <div class="col-md-12">
            <small>
            <table class="table table-hover" > 

                <thead >
                <tr style="background-color: #eeeeee">  
                    <th width="150">MPN</th> 
                    <th>描述</th>
                    <th width="150">MOKO 编码</th>
                    <th>MOKO 描述</th>
                    <th width="50">位号</th>
                    <th width="50">数量</th> 
                    <th width="100">成本价</th>
                    <th width="60">报价</th>                 
                    <th >Other</th>
                    <th width="30"></th>
                    <th >工程师备注</th>
                </tr>
                </thead>
               
                <% @baojia.each_with_index do |item,index| %> 
                <tr id="<%=item.id%>_tr" <% if item.color == "b" %>class="bg-info"<% elsif item.color == "g" %>class="bg-success"<% else %>class="bg-danger"<% end %>  >
<!--
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;"><small><%= item.mpn %></small></td>
-->
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;"><small>
                        <table class="table table-hover table-bordered" style="padding: 0px;margin: 0px;">
                            <tr>
                                <td colSpan="3" class="text-center" style="padding: 0px;margin: 0px;"><small><%= item.mpn %></small></td>
                            </tr>
                            <tr id="<%= item.id.to_s + '_mpn_tr' %>">
                                <% if DigikeysStock.find_by_manufacturer_part_number(item.mpn).blank? %>
                                    <% if item.link.blank? or item.link == "" %>
                                        <% if item.mpn == nil or item.mpn == "" %>
                                            <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#F0F0F0" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA"></a></small></td>
                                        <% else %>
                                            <td class="text-center" style="padding: 0px;margin: 0px;"><small><a class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA" href="http://www.digikey.com/product-search/en?keywords=<%= item.mpn %>" target="_blank"></a></small></td>
                                        <% end %>
                                        
                                    <% else %>
                                        <% if item.link =~ /https/i %>
                                            <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#FF00FF" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA" href="http://<%= item.link.split('https://')[-1].split(' ')[0] %>" target="_blank"></a></small></td>
                                        <% elsif item.link =~ /http/i %>
                                            <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#FF00FF" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA" href="http://<%= item.link.split('http://')[-1].split(' ')[0] %>" target="_blank"></a></small></td>
                                        <% else %>
                                            <% if item.mpn == nil or item.mpn == "" %>
                                                <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#F0F0F0" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA"  ></a></small></td>
                                            <% else %>
                                                <td class="text-center" style="padding: 0px;margin: 0px;"><small><a  class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA" href="http://www.digikey.com/product-search/en?keywords=<%= item.mpn %>" target="_blank"></a></small></td>
                                            <% end %>
                                        <% end %>
                                    <% end %>
                            
                                    <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#F0F0F0" class="glyphicon glyphicon-picture" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA"></a></small></td>
                                            
                                    <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#F0F0F0" class="glyphicon glyphicon-file" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="NO DATA"></a></small></td>
                                <% else %>
                                    <% if item.link.blank? or item.link == "" %>
                                        <td class="text-center" style="padding: 0px;margin: 0px;"><small><a class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top"  data-content="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).description + " " + ((DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.include?'<name>Tolerance</name><value>')? (DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.split('<name>Tolerance</name><value>')[-1].split('</value>')[0].to_s):'') %>" href="http://www.digikey.com/product-search/en?keywords=<%= item.mpn %>" target="_blank"></a></small></td>
                                    <% else %>
                                        <% if item.link =~ /https/i %>
                                            <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#FF00FF" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).description + " " + ((DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.include?'<name>Tolerance</name><value>')? (DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.split('<name>Tolerance</name><value>')[-1].split('</value>')[0].to_s):'') %>" href="https://<%= item.link.split('https://')[-1].split(' ')[0] %>" target="_blank"></a></small></td>
                                        <% elsif item.link =~ /http/i %>
                                            <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#FF00FF" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top" data-content="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).description + " " + ((DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.include?'<name>Tolerance</name><value>')? (DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.split('<name>Tolerance</name><value>')[-1].split('</value>')[0].to_s):'') %>" href="http://<%= item.link.split('http://')[-1].split(' ')[0] %>" target="_blank"></a></small></td>

                                        <% else %>
                                            <% if item.mpn == nil or item.mpn == "" %>
                                                <td class="text-center" style="padding: 0px;margin: 0px;"><small><a style="color:#F0F0F0" class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top"  data-content="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).description + " " + DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.split('<name>Tolerance</name><value>')[-1].split('</value>')[0].to_s %>" ></a></small></td>
                                            <% else %>
                                                <td class="text-center" style="padding: 0px;margin: 0px;"><small><a class="glyphicon glyphicon-info-sign" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="hover" data-placement="top"  data-content="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).description + " " + DigikeysStock.find_by(manufacturer_part_number: item.mpn).others.split('<name>Tolerance</name><value>')[-1].split('</value>')[0].to_s %>" href="http://www.digikey.com/product-search/en?keywords=<%= item.mpn %>" target="_blank"></a></small></td>
                                            <% end %>
                                        <% end %>
                                    <% end %>
                                    
                                    <td class="text-center" style="padding: 0px;margin: 0px;"><small><a class="glyphicon glyphicon-picture" data-toggle="popoverii"  data-placement="right" data_src="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).image %>" href="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).image %>"  target="_blank"></a></small></td>
                                            
                                    <td class="text-center" style="padding: 0px;margin: 0px;"><small><a class="glyphicon glyphicon-file" href="<%= DigikeysStock.find_by(manufacturer_part_number: item.mpn).datasheets %>" target="_blank"></a></small></td>
                                <% end %>
                                
                            </tr>
                        </table>


                    </small></td>   

                    
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;" type="button" data-toggle="collapse" data-target="#<%= item.id.to_s + 'dow' %>" aria-expanded="false" aria-controls="<%= (index+1).to_s + 'bom' %>"  ><small><%= item.description %></small></td> 

                    <% if item.product_id !=0 and item.product_id != nil%>
                        <td style="padding: 5px 0px 5px 0px;margin: 0px;">
                            <small>
                            
                            <a class="text-muted" name="<%= item.id.to_s + 'n' %>"  id="<%= item.id.to_s + 'n' %>" data-container="body" data-toggle="popover" tabindex="0"  data-trigger="focus"><%= Product.find(item.product_id).name %></a>
                            </small>
                        </td>
                        <td style="padding: 5px 0px 5px 0px;margin: 0px;">
                            <small>
                            
                            <a class="text-muted" name="<%= item.id.to_s + 'd' %>"  id="<%= item.id.to_s + 'd' %>" data-container="body"><%= Product.find(item.product_id).description %></a>
                            </small>
                        </td>
                        
                    <% else %>
                        <td style="padding: 5px 0px 5px 0px;margin: 0px;">
                            <small> 
                                
                                <a class="text-muted" name="<%= item.id.to_s + 'n' %>"  id="<%= item.id.to_s + 'n' %>"></a>
                                
                            </small>
                            
                        </td>
                        <td style="padding: 5px 0px 5px 0px;margin: 0px;">
                            <small> 
                                
                                <a class="text-muted" name="<%= item.id.to_s + 'd' %>"  id="<%= item.id.to_s + 'd' %>"></a>
                            </small>
                        </td>
                        
                    <% end %>
                    <% if item.part_code.to_s.size > 5 %>
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;"><small><%= item.part_code.to_s[0,3]+"..." %></small></td>
                    <% else %>
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;"><small><%= item.part_code.to_s %></small></td>
                    <% end %>
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;"><small><%= item.quantity*@boms.qty %></small></td> 

                  
                    
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;">
                        <small>
                            <a class="text-muted"><%= "￥" + item.cost.to_s %></a>
                        </small>
                    </td>
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;">
                        <small>
                            <a class="text-muted"><%= "￥" + item.price.to_s %></a>
                        </small>
                    </td>
                    <td style="padding: 5px 0px 5px 0px;margin: 0px;" ><small><%= item.other %></small></td>
                    <td width="30" style="padding: 5px 0px 5px 0px;margin: 0px;"><small><a class="btn btn-info btn-xs" data-toggle="modal" data-target="#remarkitem" data-itempid="<%= item.id %>" >备<br>注</a></small></td>
                    <td>
<div class="row" style="margin: 0px;" >
<div class="col-md-12 " style="margin: 0px;padding: 0px;background-color: #fcf8e3;" id="<%= item.id %>_item_remark">
<% PItemRemark.where(p_item_id: item.id).each do |remark_item| %>
<div class="row" style="margin: 0px;" >
<div class="col-md-12 " style="margin: 0px;padding: 0px;background-color: #fcf8e3;">
<table style="margin: 0px;" >
<tr>
<td style="padding: 0px;margin: 0px;" >
<p style="padding: 0px;margin: 0px;" >
<small >
<% if not remark_item.info.blank? %>
<a class="btn btn-info btn-xs" href="<%= remark_item.info.url %>" target="_blank">下载</a>
<% end %>
<% if remark_item.user_id == current_user.id %>
<a class="glyphicon glyphicon-remove" data-method="get" data-remote="true" href="/p_item_remark_del?itemp_id=<%= item.id %>&remark_id=<%= remark_item.id %>" data-confirm="确定要删除?"> </a>
<% end %>
<strong><%= remark_item.updated_at.localtime.strftime('%Y-%m-%d %H:%M:%S').to_s %></strong>
<strong><%= remark_item.user_name %>: </strong>
<% if remark_item.state == "del" %>
<del><%= remark_item.remark %></del>
<% else %>
<%= remark_item.remark %>
<% end %>
</small>
</p>
</td>
</tr>
</table>
</div>
</div>
<% end %>
</div>

<% if not item.dn_id.blank? %>
<% if not PDn.find_by_id(item.dn_id).blank? %>
<% if not PDn.find(item.dn_id).remark.blank? %>
<div class="row" style="margin: 0px;" >
<div class="col-md-12 " style="margin: 0px;padding: 0px;background-color: #fcf8e3;">
<table style="margin: 0px;" >
<tr>
<td style="padding: 0px;margin: 0px;" >
<p style="padding: 0px;margin: 0px;" >
<small >
<% if not PDn.find(item.dn_id).info.blank? %>                 
<a class="btn btn-info btn-xs" href="<%= PDn.find(item.dn_id).info %>" target="_blank">下载</a>
<% end %>
<strong>采购工程师: </strong>
<%= PDn.find(item.dn_id).remark %>
</small>
</p>
</td>
</tr>
</table>
</div>
</div>
<% end %>
<% end %>
<% end %>
</div>
                    </td>

                </tr>
                <% end %>

            </table></small>
               </div>
            </div>
 










    </div>






















</div>





<%
meta title: "Quick Turn PCB Prototype and Electronic PCB Assembly Service| Fastbom.com.",
     description: "Fastbom offers Quick Turn PCB Prototype and Electronic PCB Assembly Service in low to mid volumes including PCB fabrication, parts procurement and final assembly. upload your Bill of Materials (BOM), Assembly Drawing, Fabrication Drawing (used to do incoming inspection of your PCB),  to get a fast quote.",
     keywords: "pcb assembly service, pcb assembly services, pcb assemblies, electronic assemblies, electronic assembly services, pcb prototype services, pcb prototype  service"
%>
